# ChatStack 插件 — 可勾选清单

发版前或大改动后，建议按本清单逐项在本地验证并勾选。完成后可将「未通过」项记录到 ISSUE 或 PLUGIN_STATUS_REPORT 的「已知局限」中。

---

## 1. 功能 — 基础

- [ ] 在 ChatGPT 会话页（URL 含 `/c/`）右侧出现侧边栏
- [ ] 侧边栏宽度约 320px，可拖拽左缘调整宽度
- [ ] 三个 Tab 可见且可切换：当前对话、历史、项目
- [ ] 点击扩展图标或快捷键可打开/关闭侧边栏
- [ ] 设置中可切换语言（中/英/跟随系统），界面即时更新
- [ ] 设置中可切换主题（浅色/深色/跟随系统），样式正确
- [ ] 无 Console 报错、无样式错位

---

## 2. 功能 — 当前对话（TOC）

- [ ] 在 ChatGPT 中发 3～5 条用户消息后，「当前对话」中出现对应目录条目
- [ ] 每条目录标题为问题前约 36 字
- [ ] 点击某条目录，页面滚动到对应消息并高亮约 2 秒
- [ ] 新发一条用户消息后，目录自动更新（可等待约 0.5s）
- [ ] 流式输出时目录不频繁闪烁
- [ ] 筛选：全部 / 用户 / AI / 收藏 切换正常
- [ ] 「添加到项目」可从当前对话添加入项目

---

## 3. 功能 — 搜索

- [ ] 在「当前对话」搜索框输入关键词，出现「搜索结果」列表
- [ ] 结果包含角色标识（用户/AI）与匹配片段
- [ ] 点击**用户消息**的搜索结果 → 能跳转并高亮
- [ ] 点击**助手消息**的搜索结果 → 能跳转并高亮
- [ ] 清空搜索框后恢复为目录显示
- [ ] 搜索无结果时有明确提示

---

## 4. 功能 — 历史

- [ ] 「历史」Tab 中对话按平台分组显示
- [ ] 搜索框可搜索对话标题或内容
- [ ] 点击「筛选」可设置日期范围、平台来源，筛选结果正确
- [ ] 点击某条对话进入详情，可查看消息列表
- [ ] 详情内可：收藏、添加到项目、在浏览器中打开、删除对话
- [ ] 详情内搜索当前对话内容正常，结果可跳转
- [ ] 返回列表后状态正确

---

## 5. 功能 — 项目

- [ ] 「项目」Tab 中可见「ChatGPT Projects (Auto)」和「My Projects」
- [ ] 点击「+ 新建项目」、输入名称后，项目出现在「My Projects」
- [ ] 可从当前对话 / 历史 / 项目详情 使用「添加到项目」
- [ ] 选择已有项目或新建项目后，会话正确加入
- [ ] My 项目可重命名、删除；删除项目不影响会话本身
- [ ] 会话可加入多个 My 项目
- [ ] My 项目内会话可拖拽到其他 My 项目（若支持）
- [ ] 从项目内移除会话、删除对话等操作符合预期

---

## 6. 功能 — 导出

- [ ] 当前对话、历史、项目 三个 Tab 均有「导出」入口
- [ ] 进入导出模式后可选格式（JSON / MD / TXT）与 ZIP
- [ ] 可勾选单条/多条消息或对话或项目，全选/清空正常
- [ ] 点击「下载」后文件正确生成并下载
- [ ] 取消导出后退出导出模式，界面恢复

---

## 7. 功能 — 设置与数据

- [ ] 设置中「自动保存」开关生效（关掉后对话不自动解析/同步历史）
- [ ] 「清空所有数据」有二次确认，执行后数据清空、界面状态正确
- [ ] 创建项目或添加会话后，关闭浏览器再打开，数据仍在

---

## 8. 多平台（若已支持）

- [ ] 在 Gemini 会话页侧边栏正常显示且功能可用
- [ ] ChatGPT 与 Gemini 下数据隔离或共享符合预期（当前为同 storage）

---

## 9. 兼容与健壮

- [ ] 在非会话页（如首页）点击扩展图标有友好提示（如「请先打开或创建一个对话」）
- [ ] 扩展重载后刷新页面，侧边栏可再次正常使用
- [ ] 无「Extension context invalidated」导致的持续报错

---

## 10. 文档与发布

- [ ] README / QUICKSTART 与当前功能一致
- [ ] TEST_REPORT 或本 CHECKLIST 中列出的「已知限制」已阅读并接受
- [ ] manifest.json 中 version 与发布意图一致
- [ ] 若上架商店：图标、描述、权限说明已准备

---

## 使用说明

- 每项验证通过则在 `- [ ]` 中改为 `- [x]`（或在你自己的副本中勾选）。
- 若有项未通过，建议在 PLUGIN_STATUS_REPORT 或 ISSUE 中记录现象与复现步骤。
- 建议发版前完整走一遍本清单，并更新 docs/PLUGIN_STATUS_REPORT.md 中的「评估时间」与「已知局限」。
