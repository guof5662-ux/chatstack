ChatGPT Sidebar Navigator - é¡¹ç›®ç»“æ„
=====================================

chatgpt-sidebar-extension/
â”‚
â”œâ”€â”€ manifest.json                    # æ‰©å±•é…ç½®æ–‡ä»¶ï¼ˆManifest V3ï¼‰
â”‚                                    # å®šä¹‰æƒé™ã€content scriptsã€å›¾æ ‡ç­‰
â”‚
â”œâ”€â”€ icons/                           # æ‰©å±•å›¾æ ‡èµ„æº
â”‚   â”œâ”€â”€ icon16.png                   # 16x16 å·¥å…·æ å›¾æ ‡
â”‚   â”œâ”€â”€ icon48.png                   # 48x48 æ‰©å±•ç®¡ç†é¡µå›¾æ ‡
â”‚   â””â”€â”€ icon128.png                  # 128x128 Chrome ç½‘ä¸Šåº”ç”¨åº—å›¾æ ‡
â”‚
â”œâ”€â”€ content/                         # Content Scriptsï¼ˆæ³¨å…¥åˆ°é¡µé¢ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ content.js                   # ğŸ”‘ ä¸»å…¥å£
â”‚   â”‚                                # - åè°ƒå„æ¨¡å—
â”‚   â”‚                                # - åˆå§‹åŒ–ç®¡ç†å™¨
â”‚   â”‚                                # - å¯åŠ¨é¡µé¢ç›‘å¬
â”‚   â”‚
â”‚   â”œâ”€â”€ platform-adapter.js          # ğŸ”Œ å¹³å°é€‚é…å™¨åŸºç±»
â”‚   â”‚                                # - å®šä¹‰å„å¹³å°é€‚é…å™¨æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ chatgpt-adapter.js           # ğŸ”Œ ChatGPT é¡µé¢é€‚é…å™¨
â”‚   â”œâ”€â”€ gemini-adapter.js            # ğŸ”Œ Gemini é¡µé¢é€‚é…å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ html-to-markdown.js          # ğŸ“„ HTMLâ†’Markdown/Text è½¬æ¢ï¼ˆçº¯é€»è¾‘ï¼‰
â”‚   â”‚                                # - ä¾› TOC ä¸å¯¼å‡ºä½¿ç”¨
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar-export.js            # ğŸ“¤ ä¾§è¾¹æ å¯¼å‡ºæ¨¡å—
â”‚   â”‚                                # - å¯¼å‡ºæ¨¡å¼ã€å‹¾é€‰ã€æ„å»ºæ–‡ä»¶ã€ä¸‹è½½
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar-toc.js               # ğŸ“‘ TOC ä¸æ¶ˆæ¯å†…æœç´¢æ¨¡å—
â”‚   â”‚                                # - æ¶ˆæ¯ HTML æå–ã€é«˜äº®ã€æµ®å±‚æœç´¢
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar-filters.js           # ğŸ” ç­›é€‰ä¸æ—¥æœŸé€‰æ‹©å™¨æ¨¡å—
â”‚   â”‚                                # - æ—¥æœŸèŒƒå›´ã€å¹³å°ç­›é€‰ã€æ—¥æœŸé€‰æ‹©å™¨ UI
â”‚   â”‚
â”‚   â”œâ”€â”€ sidebar.js                   # ğŸ¨ ä¾§è¾¹æ  UI ç¼–æ’
â”‚   â”‚                                # - Shadow DOM æ³¨å…¥ã€å¸ƒå±€ã€ä¸»é¢˜
â”‚   â”‚                                # - Tab åˆ‡æ¢ã€è¿›åº¦ã€äº‹ä»¶å§”æ‰˜
â”‚   â”‚                                # - ç¼–æ’ export/toc/filters ç­‰å­æ¨¡å—
â”‚   â”‚
â”‚   â””â”€â”€ sidebar.css                  # ğŸ’… ä¾§è¾¹æ æ ·å¼
â”‚                                    # - Shadow DOM éš”ç¦»æ ·å¼
â”‚                                    # - å“åº”å¼è®¾è®¡
â”‚                                    # - æš—è‰²æ¨¡å¼æ”¯æŒ
â”‚
â”œâ”€â”€ core/                            # æ ¸å¿ƒç®¡ç†æ¨¡å—ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ storage.js                   # ğŸ’¾ å­˜å‚¨ç®¡ç†å™¨
â”‚   â”‚                                # - chrome.storage.local å°è£…
â”‚   â”‚                                # - ç»Ÿä¸€æ•°æ®æ¥å£
â”‚   â”‚                                # - ä¾¿äºè¿ç§»åˆ° IndexedDB
â”‚   â”‚
â”‚   â”œâ”€â”€ toc-manager.js               # ğŸ“š TOC ç®¡ç†å™¨
â”‚   â”‚                                # - ä»æ¶ˆæ¯æ„å»ºç›®å½•
â”‚   â”‚                                # - ç”Ÿæˆæ¡ç›®æ ‡é¢˜
â”‚   â”‚                                # - è·³è½¬ä¸é«˜äº®
â”‚   â”‚                                # - å…¨æ–‡æœç´¢
â”‚   â”‚
â”‚   â”œâ”€â”€ project-manager.js           # ğŸ“ é¡¹ç›®ç®¡ç†å™¨
â”‚   â”‚                                # - ChatGPT Projects (Auto) æ˜ å°„
â”‚   â”‚                                # - My Projects å¢åˆ æ”¹
â”‚   â”‚                                # - ä¼šè¯ä¸é¡¹ç›®å…³è”
â”‚   â”‚
â”‚
â”œâ”€â”€ README.md                        # ğŸ“„ å®Œæ•´ä½¿ç”¨æ–‡æ¡£
â”‚                                    # - åŠŸèƒ½ä»‹ç»
â”‚                                    # - æŠ€æœ¯æ¶æ„
â”‚                                    # - å®‰è£…æ­¥éª¤
â”‚                                    # - æµ‹è¯•æ¸…å•
â”‚                                    # - è°ƒè¯•æŠ€å·§
â”‚
â”œâ”€â”€ QUICKSTART.md                    # âš¡ å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚                                    # - 5 åˆ†é’Ÿä¸Šæ‰‹
â”‚                                    # - æ ¸å¿ƒåŠŸèƒ½ä½“éªŒ
â”‚                                    # - å¸¸è§é—®é¢˜
â”‚
â”œâ”€â”€ generate-icons.py                # ğŸ¨ å›¾æ ‡ç”Ÿæˆè„šæœ¬
â”‚                                    # - è‡ªåŠ¨ç”Ÿæˆä¸‰ç§å°ºå¯¸å›¾æ ‡
â”‚                                    # - éœ€è¦ Pillow åº“
â”‚
â””â”€â”€ PROJECT_STRUCTURE.txt            # ğŸ“‹ æœ¬æ–‡ä»¶


æ ¸å¿ƒæ•°æ®æµ
==========

1. é¡µé¢åŠ è½½
   â””â”€> content.js åˆå§‹åŒ–
       â”œâ”€> åˆå§‹åŒ–æ‰€æœ‰ Manager (storage/toc/project)
       â”œâ”€> chatgpt-adapter è§£æé¡µé¢
       â”‚   â””â”€> MutationObserver ç›‘å¬ DOM å˜åŒ–
       â””â”€> sidebar.js æ³¨å…¥ä¾§è¾¹æ  (Shadow DOM)

2. æ¶ˆæ¯æ›´æ–°
   â””â”€> chatgpt-adapter æ£€æµ‹åˆ°æ–°æ¶ˆæ¯ (debounce 500ms)
       â””â”€> è§¦å‘ onMessagesUpdated å›è°ƒ
           â””â”€> sidebar.js æ›´æ–° UI
               â”œâ”€> tocManager.buildTOC() â†’ æ¸²æŸ“ç›®å½•
               â”œâ”€> projectManager.mapToChatGPTProject() â†’ è‡ªåŠ¨æ˜ å°„é¡¹ç›®

3. ç”¨æˆ·äº¤äº’
   â”œâ”€> ç‚¹å‡»ç›®å½•æ¡ç›®
   â”‚   â””â”€> tocManager.jumpToMessage() â†’ æ»šåŠ¨ + é«˜äº®
   â”‚
   â”œâ”€> åˆ›å»ºé¡¹ç›®
   â”‚   â””â”€> projectManager.createMyProject() â†’ ä¿å­˜åˆ° storage
   â”‚
   â”‚
   â””â”€> æ¢å¤è¿›åº¦

4. æ•°æ®æŒä¹…åŒ–
   â””â”€> æ‰€æœ‰æ•°æ®é€šè¿‡ storageManager ç»Ÿä¸€ç®¡ç†
       â””â”€> chrome.storage.local
           â”œâ”€> conv_{id}: ä¼šè¯æ•°æ®
           â”œâ”€> projects: é¡¹ç›®æ•°æ®
           â””â”€> config: é…ç½®æ•°æ®


å…³é”®è®¾è®¡ç‰¹ç‚¹
============

âœ… Shadow DOM éš”ç¦»        é¿å…ä¸ ChatGPT æ ·å¼å†²çª
âœ… MutationObserver       æ”¯æŒæµå¼è¾“å‡ºå®æ—¶æ›´æ–°
âœ… Debounce ä¼˜åŒ–          é¿å…é¢‘ç¹é‡å»ºï¼ˆ500msï¼‰
âœ… æ ¸å¿ƒä¸é€‚é…å™¨åˆ†ç¦»       ä¾¿äºæ‰©å±•åˆ°å…¶ä»–å¹³å°
âœ… æ¨¡å—åŒ–è®¾è®¡             æ¯ä¸ª Manager ç‹¬ç«‹èŒè´£
âœ… ç»Ÿä¸€å­˜å‚¨æ¥å£           ä¾¿äºè¿ç§»åˆ° IndexedDB
âœ… å¼€å‘æ—¥å¿—å¼€å…³           æ–¹ä¾¿è°ƒè¯•ä¸ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢


å¼€å‘è€…æ³¨æ„äº‹é¡¹
==============

1. ChatGPT UI å˜åŒ–é€‚é…
   â†’ ä¸»è¦ä¿®æ”¹ chatgpt-adapter.js çš„ parseMessages() æ–¹æ³•
   â†’ æ›´æ–° DOM é€‰æ‹©å™¨ä»¥åŒ¹é…æ–°ç»“æ„

2. æ€§èƒ½ä¼˜åŒ–
   â†’ Debounce å»¶è¿Ÿå¯è°ƒï¼ˆchatgpt-adapter.js:12ï¼‰

3. æ•°æ®è¿ç§»
   â†’ ç¬¬ä¸€ç‰ˆä½¿ç”¨ chrome.storage.localï¼ˆé™åˆ¶ 10MBï¼‰
   â†’ å¤§é‡æ•°æ®å»ºè®®è¿ç§»åˆ° IndexedDB
   â†’ storageManager æä¾›ç»Ÿä¸€æ¥å£ï¼Œè¿ç§»æ—¶åªéœ€ä¿®æ”¹æ­¤æ¨¡å—

4. æ‰©å±•åŠŸèƒ½
   â†’ æ‰€æœ‰æ ¸å¿ƒé€»è¾‘åœ¨ core/ ç›®å½•
   â†’ æ·»åŠ æ–°åŠŸèƒ½ï¼šåˆ›å»ºæ–° Manager + åœ¨ sidebar.js æ·»åŠ  UI


å·²å®ç°åŠŸèƒ½æ¸…å•
==============

âœ… A. ä¼šè¯å†… TOC
   â”œâ”€ ä»¥ç”¨æˆ·æé—®ä¸ºæ¡ç›®
   â”œâ”€ æ ‡é¢˜æˆªå–å‰ 36 å­—
   â”œâ”€ ç‚¹å‡»è·³è½¬å¹¶é«˜äº® 2 ç§’
   â””â”€ è‡ªåŠ¨æ›´æ–°ï¼Œæ— æŠ–åŠ¨

âœ… B. ä¼šè¯å†…æœç´¢
   â”œâ”€ å…³é”®è¯æœç´¢ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰
   â”œâ”€ æ˜¾ç¤ºåŒ¹é…ç‰‡æ®µ
   â””â”€ ç‚¹å‡»è·³è½¬å®šä½

âœ… C. åŒå±‚ Projects
   â”œâ”€ ChatGPT Projects (Auto)
   â”‚  â”œâ”€ è‡ªåŠ¨æ˜ å°„ï¼ˆåªè¯»ï¼‰
   â”‚  â””â”€ æ— æ³•è·å–æ—¶å½’å…¥ Inbox (Auto)
   â””â”€ My Projects
      â”œâ”€ ç”¨æˆ·åˆ›å»º/åˆ é™¤
      â”œâ”€ ä¼šè¯å¤šå¯¹å¤šå…³è”
      â””â”€ é¢„ç•™æ‹–æ‹½æ’åºç»“æ„

æ–‡ä»¶å¤§å°ç»Ÿè®¡
============

manifest.json              ~1 KB
content/content.js         ~3 KB
content/platform-adapter.js ~4 KB
content/chatgpt-adapter.js  ~9 KB
content/gemini-adapter.js   ~10 KB
content/html-to-markdown.js ~11 KB
content/sidebar-export.js   ~17 KB
content/sidebar-toc.js      ~14 KB
content/sidebar-filters.js  ~9 KB
content/sidebar.js          ~140 KBï¼ˆç¼–æ’ + å†å²/é¡¹ç›®è§†å›¾ç­‰ï¼‰
content/sidebar.css         ~10 KB
core/storage.js             ~4 KB
core/toc-manager.js         ~4 KB
core/project-manager.js     ~6 KB
core/i18n.js                ~5 KB

æ€»è®¡: ~230 KB (æœªå‹ç¼©)ã€‚ä¾§è¾¹æ é€»è¾‘å·²æ‹†åˆ†ä¸º html-to-markdownã€sidebar-exportã€sidebar-tocã€sidebar-filtersï¼Œä¾¿äºç»´æŠ¤ä¸å•æµ‹ã€‚
